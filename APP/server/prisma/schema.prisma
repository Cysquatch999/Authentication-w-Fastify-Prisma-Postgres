generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model users {
  id             Int              @id @default(autoincrement())
  name           String           @db.VarChar(100)
  email          String           @unique @db.VarChar(150)
  password       String           @db.VarChar(256)
  creationAt     DateTime         @default(now()) @db.Timestamptz(6)
  isVerified     Boolean          @default(false)
  isAdmin        Boolean          @default(false)
  reset_password reset_password[]
  verify_account verify_account[]
}

model reset_password {
  id          Int      @id @default(autoincrement())
  userID      Int
  resetCode   String   @db.VarChar(256)
  isActive    Boolean  @default(true)
  isUsed      Boolean  @default(false)
  expiredTime DateTime @default(now()) @db.Timestamptz(6)
  users       users    @relation(fields: [userID], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "users_id_to_reset_password_userID")

  @@index([userID], map: "fki_userID_to_reset_password")
}

model verify_account {
  id          Int      @id @default(autoincrement())
  userID      Int
  verifyCode  String   @db.VarChar(256)
  expiredTime DateTime @default(now()) @db.Timestamptz(6)
  isUsed      Boolean  @default(false)
  isActive    Boolean  @default(true)
  users       users    @relation(fields: [userID], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "users_id_to_verify_account_userID")

  @@index([userID], map: "fki_b")
  @@index([userID], map: "fki_users_id_to_verify_account_userID")
}
